(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0fab8588"],{"0bfb":function(t,e,i){"use strict";var a=i("cb7c");t.exports=function(){var t=a(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},"1e55":function(t,e,i){"use strict";i.d(e,"a",(function(){return r})),i.d(e,"c",(function(){return n})),i.d(e,"b",(function(){return o}));var a=i("b775");function r(){return Object(a["a"])({url:"/screen/getScreen",method:"post"})}function n(t){return Object(a["a"])({url:"/screen/setScreen",method:"post",data:t})}function o(t){return Object(a["a"])({url:"/screen/getScreenById",method:"post",data:t})}},"1ea4":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"table",staticStyle:{"background-color":"rgba(16, 22, 54, 1)"}},[i("v-window",{staticStyle:{height:"25vh"},attrs:{vertical:"",reverse:""},model:{value:t.step,callback:function(e){t.step=e},expression:"step"}},t._l(t.numOfwindow,(function(e){return i("v-window-item",{key:e},[i("v-simple-table",{staticStyle:{"background-color":"rgba(16, 22, 54, 1)"},attrs:{"fixed-header":"",dark:""},scopedSlots:t._u([{key:"default",fn:function(){return[i("thead",[i("tr",[i("th",{staticClass:"text-left",staticStyle:{"background-color":"rgba(16, 22, 54, 1)"}},[t._v("title")]),i("th",{staticClass:"text-left",staticStyle:{"background-color":"rgba(16, 22, 54, 1)"}},[t._v("status")])])]),i("tbody",t._l(t.list.slice(3*(e-1),3*(e-1)+3),(function(e){return i("tr",{key:e.title},[i("td",[t._v(t._s(e.title))]),i("td",[t._v(t._s(e.status))])])})),0)]},proxy:!0}],null,!0)})],1)})),1)],1)},r=[],n={data:function(){return{list:[{title:"1231",status:"未整改"},{title:"dsad",status:"未整改"},{title:"xixi",status:"未整改"},{title:"1睡大觉降低哦1",status:"未整改"},{title:"就覅万佛i问",status:"未整改"},{title:"试点单位就",status:"未整改"},{title:"试单位就",status:"未整改"}],step:0}},computed:{numOfwindow:function(){var t=this.list.length,e=Math.floor(t/3);return t%3==0?e:e+1}},created:function(){var t=this;setInterval((function(){++t.step>=t.numOfwindow&&(t.step=0)}),3e3)}},o=n,s=i("2877"),c=Object(s["a"])(o,a,r,!1,null,null,null);e["a"]=c.exports},3846:function(t,e,i){i("9e1e")&&"g"!=/./g.flags&&i("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:i("0bfb")})},5392:function(t,e,i){"use strict";var a=i("8adf"),r=i.n(a);r.a},"6b54":function(t,e,i){"use strict";i("3846");var a=i("cb7c"),r=i("0bfb"),n=i("9e1e"),o="toString",s=/./[o],c=function(t){i("2aba")(RegExp.prototype,o,t,!0)};i("79e5")((function(){return"/a/b"!=s.call({source:"a",flags:"b"})}))?c((function(){var t=a(this);return"/".concat(t.source,"/","flags"in t?t.flags:!n&&t instanceof RegExp?r.call(t):void 0)})):s.name!=o&&c((function(){return s.call(this)}))},"8adf":function(t,e,i){},a24c:function(t,e,i){},a737:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"time"},[i("div",{staticClass:"nowTime"},[t._v("\n        "+t._s(t.getCurDate())+"\n    ")]),i("div",{staticClass:"nowTime"},[t._v("\n        "+t._s(t.getCurTime())+"\n    ")])])},r=[],n=(i("d8b4"),{name:"Time",data:function(){return{time:new Date}},methods:{getCurDate:function(){var t=this.time.getFullYear(),e=this.time.getMonth()+1,i=this.time.getDate();return e<10&&(e="0"+e),"".concat(t,"年").concat(e,"月").concat(i,"日")},getCurTime:function(){var t=(new Date).getHours(),e=(new Date).getMinutes(),i=(new Date).getSeconds();return t<10&&(t="0"+t),e<10&&(e="0"+e),i<10&&(i="0"+i),"".concat(t,":").concat(e,":").concat(i)}},mounted:function(){var t=this;this.timer=setInterval((function(){t.time=new Date}),1e3)},beforeDestroy:function(){this.timer&&clearInterval(this.timer)}}),o=n,s=(i("5392"),i("2877")),c=Object(s["a"])(o,a,r,!1,null,null,null);e["a"]=c.exports},ac6a:function(t,e,i){for(var a=i("cadf"),r=i("0d58"),n=i("2aba"),o=i("7726"),s=i("32e9"),c=i("84f2"),l=i("2b4c"),h=l("iterator"),u=l("toStringTag"),d=c.Array,g={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=r(g),f=0;f<p.length;f++){var m,v=p[f],b=g[v],w=o[v],S=w&&w.prototype;if(S&&(S[h]||s(S,h,d),S[u]||s(S,u,v),c[v]=d,b))for(m in a)S[m]||n(S,m,a[m],!0)}},b434:function(t,e,i){"use strict";var a=i("a24c"),r=i.n(a);r.a},c41e:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"screen"},[i("div",{staticClass:"chart"},[i("v-toolbar",{attrs:{color:"#EEEEEE",flat:"",dense:""}},[i("h1",{staticClass:"v-subheader black--text"},[t._v("请选择大屏背景颜色")]),i("el-color-picker",{attrs:{"show-alpha":""},on:{change:t.showColor,"active-change":t.showActivecolor},model:{value:t.backgroundColor,callback:function(e){t.backgroundColor=e},expression:"backgroundColor"}}),i("v-spacer"),i("v-btn",{attrs:{text:"",color:"primary"},on:{click:t.toChild}},[t._v("确认布置到home界面中")])],1),i("v-row",{attrs:{"no-gutters":""}},[i("v-col",{attrs:{cols:"3"}},[i("div",{staticStyle:{height:"8vh","background-color":"rgba(16, 22, 54, 1)"},attrs:{id:"image"}},[i("img",{directives:[{name:"show",rawName:"v-show",value:t.imgUrl,expression:"imgUrl"}],staticStyle:{width:"100%",height:"100%"},attrs:{src:t.imgUrl},on:{click:t.clickUpload}}),i("el-upload",{directives:[{name:"show",rawName:"v-show",value:!t.imgUrl,expression:"!imgUrl"}],class:{"avatar-uploader":!t.imgUrl},attrs:{action:"https://jsonplaceholder.typicode.com/posts/","show-file-list":!1,"on-success":t.handleAvatarSuccess}},[i("i",{ref:"clickupload",staticClass:"el-icon-plus avatar-uploader-icon"})])],1)]),i("v-col",{attrs:{cols:"6",id:"notice"}},[i("div",{staticStyle:{height:"8vh"}},[0!=t.isNoticeEditing?i("div",{staticStyle:{width:"100%",height:"100%"},on:{click:t.addNotice}},[i("marquee",{staticClass:"white--text title",staticStyle:{height:"100%","background-color":"rgba(16, 22, 54, 1)"}},[t._v(t._s(t.notice)+"\n                            ")])],1):t._e(),0==t.isNoticeEditing?i("div",{staticStyle:{width:"100%",height:"100%"}},[i("el-input",{staticStyle:{height:"100%",width:"70%","font-size":"large","margin-top":"20px"},model:{value:t.notice,callback:function(e){t.notice=e},expression:"notice"}}),i("el-button",{on:{click:t.handleSaveNotice}},[t._v("保存")])],1):t._e()])]),i("v-col",{attrs:{cols:"3",id:"time"}},[i("div",{staticClass:"time",staticStyle:{height:"8vh"}},[i("time1")],1)])],1),i("v-row",{attrs:{"no-gutters":""}},[i("v-col",{attrs:{cols:"3"}},[i("v-row",{attrs:{"no-gutters":""}},[i("v-col",{attrs:{cols:"12",id:"1"}},[t.screenChartList.length>8?i("div",{staticClass:"chart_height outlined",on:{click:function(e){return t.sendId(1)}}},[i("chart",{staticStyle:{width:"100%",height:"100%"},attrs:{options:t.screenChartList[1].option,"auto-resize":!0}})],1):t._e()]),i("v-col",{attrs:{cols:"12"}},[t.screenChartList.length>8?i("div",{staticClass:"chart_height outlined",on:{click:function(e){return t.sendId(2)}}},[i("chart",{staticStyle:{width:"100%",height:"100%"},attrs:{options:t.screenChartList[2].option,"auto-resize":!0}})],1):t._e()])],1)],1),i("v-col",{attrs:{cols:"6"}},[t.screenChartList.length>8?i("div",{staticClass:"map_height outlined",attrs:{id:"0"},on:{click:function(e){return t.sendId(0)}}},[i("chart",{staticStyle:{width:"100%",height:"100%"},attrs:{options:t.screenChartList[0].option,"auto-resize":!0}})],1):t._e()]),i("v-col",{attrs:{cols:"3"}},[i("v-row",{attrs:{"no-gutters":""}},[i("v-col",{attrs:{cols:"12",id:"8"}},[i("table1")],1),i("v-col",{attrs:{cols:"12",id:"7"}},[t.screenChartList.length>8?i("div",{staticClass:"chart_height outlined",on:{click:function(e){return t.sendId(7)}}},[i("chart",{staticStyle:{width:"100%",height:"100%"},attrs:{options:t.screenChartList[7].option,"auto-resize":!0}})],1):t._e()])],1)],1)],1),i("v-row",{attrs:{"no-gutters":""}},[i("v-col",{attrs:{cols:"3"}},[t.screenChartList.length>8?i("div",{staticClass:"chart_height outlined",attrs:{id:"3"},on:{click:function(e){return t.sendId(3)}}},[i("chart",{staticStyle:{width:"100%",height:"100%"},attrs:{options:t.screenChartList[3].option,"auto-resize":!0}})],1):t._e()]),i("v-col",{attrs:{cols:"3"}},[t.screenChartList.length>8?i("div",{staticClass:"chart_height outlined",attrs:{id:"4"},on:{click:function(e){return t.sendId(4)}}},[i("chart",{staticStyle:{width:"100%",height:"100%"},attrs:{options:t.screenChartList[4].option,"auto-resize":!0}})],1):t._e()]),i("v-col",{attrs:{cols:"3"}},[t.screenChartList.length>8?i("div",{staticClass:"chart_height outlined",attrs:{id:"5"},on:{click:function(e){return t.sendId(5)}}},[i("chart",{staticStyle:{width:"100%",height:"100%"},attrs:{options:t.screenChartList[5].option,"auto-resize":!0}})],1):t._e()]),i("v-col",{attrs:{cols:"3"}},[t.screenChartList.length>8?i("div",{staticClass:"chart_height outlined",attrs:{id:"6"},on:{click:function(e){return t.sendId(6)}}},[i("chart",{staticStyle:{width:"100%",height:"100%"},attrs:{options:t.screenChartList[6].option,"auto-resize":!0}})],1):t._e()])],1)],1),i("el-dialog",{attrs:{visible:t.chartDialogShow},on:{"update:visible":function(e){t.chartDialogShow=e}}},[i("el-form",{attrs:{model:t.chartForm}},[i("el-form-item",{staticStyle:{"text-align":"center"}},[i("span",{staticStyle:{width:"200px",display:"inline-block","text-align":"left","font-size":"20px"}},[t._v("请选择图表：")]),i("span",{staticStyle:{width:"500px",display:"inline-block","text-align":"left","font-size":"20px"}},[i("el-select",{model:{value:t.chartForm.chartIndex,callback:function(e){t.$set(t.chartForm,"chartIndex",e)},expression:"chartForm.chartIndex"}},t._l(t.chartList,(function(t,e){return i("el-option",{attrs:{value:e,label:t.title+" id:"+t.id}})})),1),i("el-button",{staticClass:"btn-add",on:{click:t.refreshPreview}},[t._v("预览")])],1)]),t.chartForm.chartOption?i("el-form-item",[i("div",{staticStyle:{margin:"0 auto",width:"25vw",height:"30vh"}},[i("chart",{staticStyle:{width:"100%",height:"100%"},attrs:{options:t.chartForm.chartOption,"auto-resize":!0}})],1)]):t._e(),i("el-form-item",{staticStyle:{"text-align":"center"}},[i("el-button",{attrs:{type:"primary"},on:{click:t.handleSaveScreenChart}},[t._v("保存")]),i("el-button",{on:{click:function(e){t.chartDialogShow=!1}}},[t._v("取消")])],1)],1)],1),i("el-dialog",{attrs:{visible:t.logoDialogShow},on:{"update:visible":function(e){t.logoDialogShow=e}}},[i("el-form",{attrs:{model:t.chartForm}},[i("el-form-item",[i("el-upload",{staticClass:"upload-demo",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","on-preview":t.handlePreview,"on-remove":t.handleRemove,"on-success":t.getImageUrl,"file-list":t.fileList,limit:1,"list-type":"picture"}},[i("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])],1),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.saveLogo}},[t._v("保存logo")])],1)],1)],1)],1)},r=[],n=(i("ac6a"),i("6b54"),i("96cf"),i("3b8d")),o=i("a737"),s=i("1ea4"),c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"logo"},[t.imgUrl?t._e():i("el-button",{attrs:{type:"success"},on:{click:t.handleLogoFile}},[t._v("点击上传logo")]),t.imgUrl?i("img",{staticClass:"logoImg preview",attrs:{src:t.imgUrl},on:{click:t.handleLogoFile}}):t._e(),i("input",{ref:"logo",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/jpg, image/jpeg, image/gif, image/png"},on:{change:t.getImageFile}})],1)},l=[],h=i("1e55"),u={name:"uploadLogo",data:function(){return{imgUrl:null,notice:null,logoShow:!1}},methods:{handleLogoFile:function(){this.$refs.logo.click()},getImageFile:function(t){var e=this,i=t.target.files[0];console.log(i);var a=new FileReader;a.onload=function(){e.imgUrl=a.result,h["a"].then((function(t){if(t.status){if(void 0!=t.screen&&null!=t.screen){var i=t.screen,a=new URLSearchParams;a.append("backgroundColor","red"),a.append("id",1),a.append("imgUrl",e.imgUrl),a.append("notice",i.notice);for(var r=0;r<9;r++)a.append("chart"+r.toString()+"Id",i["chart"+r.toString()+"Id"]);Object(h["c"])(a).then((function(t){t.status?e.$message({message:"保存成功",type:"success",duration:3e3}):e.$message({message:"保存失败",type:"error",duration:3e3})}))}}else e.$message("失败")}))},a.readAsDataURL(i)}}},d=u,g=i("2877"),p=Object(g["a"])(d,c,l,!1,null,null,null),f=p.exports,m=i("c638"),v=i("7e1e"),b={name:"index",components:{time1:o["a"],uploadLogo1:f,table1:s["a"]},data:function(){return{backgroundColor:"rgba(16, 22, 54, 1)",fileList:[],imgUrl:"",logoShow:!1,logoForm:{name:"",url:""},isNoticeEditing:!0,notice:"",chartForm:{chartIndex:null,chartId:null,chartOption:{},dataUrl:null,positionId:null},chartList:[],chartDialogShow:!1,logoDialogShow:!1,screenChartList:[],screenId:null}},methods:{toChild:function(){this.saveScreen(),this.$router.push({path:"/home",query:{id:this.screenId}})},showActivecolor:function(t){console.log(t)},showColor:function(t){this.backgroundColor=t,console.log(this.backgroundColor)},handleLogoFile:function(){this.$refs.logo.click()},getImageFile:function(t){var e=this,i=t.target.files[0];console.log(i);var a=new FileReader;a.onload=function(){e.imgUrl=a.result,e.saveScreen()},a.readAsDataURL(i)},getImageUrl:function(t,e,i){var a=this;e=e.raw;var r=new FileReader;r.onload=function(){a.imgUrl=r.result,console.log(a.imgUrl)},r.readAsDataURL(e)},saveLogo:function(){this.logoDialogShow=!1},handleRemove:function(t,e){console.log(t,e)},handlePreview:function(t){console.log(t),console.log(this.imgUrl)},send:function(){this.logoDialogShow=!0},addNotice:function(){this.isNoticeEditing=!this.isNoticeEditing},sendId:function(t){this.chartForm.positionId=t,this.chartDialogShow=!0},loadChartData:function(t,e){var i=this;Object(v["a"])(e).then((function(e){i.$set(t,"dataset",{source:e.data})}))},refreshPreview:function(){this.chartForm.chartId=this.chartList[this.chartForm.chartIndex].id,this.chartForm.chartOption=this.chartList[this.chartForm.chartIndex].option,this.loadChartData(this.chartForm.chartOption,this.chartList[this.chartForm.chartIndex].dataSourceUrl)},loadScreenData:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.screenChartList=[],t.next=3,Object(h["a"])().then((function(t){if(t.status)if(void 0!=t.screen&&null!=t.screen){for(var i=t.screen,a=function(t){var a={};a.chartId=i["chart"+t.toString()+"Id"],a.chartId>0?a.option=e.chartList.filter((function(t){return t.id==a.chartId}))[0].option:a.option={},e.screenChartList.push(a)},r=0;r<9;r++)a(r);e.notice=i.notice,e.imgUrl=i.imgUrl,e.screenId=i.id,e.backgroundColor=i.backgroundColor}else for(r=0;r<9;r++){var n={chartId:-1,option:{}};e.screenChartList.push(n)}else e.$message("失败")}));case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),loadChartList:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(m["d"])().then((function(t){t.chartList.forEach((function(t){t.option=JSON.parse(t.option)})),e.chartList=t.chartList,e.chartList.forEach((function(t){e.loadChartData(t.option,t.dataSourceUrl)}))}));case 2:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),handleSaveScreenChart:function(){console.log(this.chartList[this.chartForm.chartIndex]),this.screenChartList[this.chartForm.positionId]=this.chartList[this.chartForm.chartIndex],this.screenChartList[this.chartForm.positionId].chartId=this.chartList[this.chartForm.chartIndex].id,this.chartDialogShow=!1},handleSaveNotice:function(){this.isNoticeEditing=!this.isNoticeEditing},saveScreen:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,i,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(e=new FormData,this.screenId&&e.append("id",this.screenId),this.backgroundColor&&e.append("backgroundColor",this.backgroundColor),this.imgUrl&&e.append("imgUrl",this.imgUrl),console.log(this.imgUrl),e.append("notice",this.notice),i=0;i<9;i++)console.log(i),console.log(this.screenChartList[i].chartId),e.append("chart"+i.toString()+"Id",this.screenChartList[i].chartId);return t.next=9,Object(h["c"])(e).then((function(t){t.status?(a.$message({message:"保存成功",type:"success",duration:3e3}),a.loadScreenData()):a.$message({message:"保存失败",type:"error",duration:3e3})}));case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleAvatarSuccess:function(t,e){var i=this,a=new FileReader;a.onload=function(){i.imgUrl=a.result,console.log(i.imgUrl),i.saveScreen()},a.readAsDataURL(e.raw)},clickUpload:function(){this.$refs.clickupload.click()}},mounted:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.loadChartList();case 2:return t.next=4,this.loadScreenData();case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},w=b,S=(i("b434"),Object(g["a"])(w,a,r,!1,null,null,null));e["default"]=S.exports},d8b4:function(t,e,i){t.exports=i.p+"static/img/logo.0b2c0447.png"}}]);